# interview-test-task

## Допущения:
- в ТЗ указано, что приложение принимает <em>неизменяемый файл конфигурации .CSV, который содержит данные вида:
`Image_URL;needed_amount_of_shows;category1;category2;category3; … ;category N`</em><br>
Я был не до конца уверен, необходимо ли было использовать его только в исходном виде или можно было перенести данные в другое, более подходящее хранилище.
Так как приложение где-то должно хранить свой стейт (лимит показов на картинку), я решил нормализовать данные и переложить их в реляционную БД. Для простоты был выбран sqlite, файлик с базой я положил прямо в репозоторий и докер-контейнер, чтобы его можно было без лишних хлопот запустить и потыкать в сваггер (на продакшне я бы, само собой, так делать не стал).<br>
![db_scheme](/assets/db_scheme.png "Database scheme")<br>
Скрипты, которые генерят тестовый csv файл с рандомными данными и кладут это все базу находятся в папке `/scripts`
- В ТЗ также указано, что <em>в ответ на запрос сервис должен выдавать простую HTML обертку с изображением картинки, которая совпадает минимум по одной категории.</em>
Для того, чтобы не заморачивать с хранилищем для тестовых картинок, вместо html обертки, сервис возвращает .json файл следующей структуры:
```
{
  "id": 172,
  "url": "http://path_to_storage/static/image_name_172.png",
  "needed_amount_of_shows": 22,
  "hit_category": "river"
}
```

## Запуск
```
$ docker pull emilkadermetov/interview-test-task:latest
$ docker run -p 8000:8000 interview-test-task:latest
```
Далее можно перейти к сваггеру и вручную протестировать работу сервиса на данных, которые зашиты внутрь контейнера<br>
http://0.0.0.0:8000/api/docs
